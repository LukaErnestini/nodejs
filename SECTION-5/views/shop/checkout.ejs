<%- include('../includes/head.ejs') %>
<link rel="stylesheet" href="/css/cart.css">
<script src="https://polyfill.io/v3/polyfill.min.js?version=3.52.1&features=fetch"></script>
<script src="https://js.stripe.com/v3/"></script>
</head>

<body>
    <%- include('../includes/navigation.ejs') %>
    <main>
        <ul class="cart__item-list">
            <% products.forEach(p => { %>
            <li class="cart__item">
                <% //console.log('\n\nitem: ', JSON.stringify(p, null, 4)); %>
                <p><%= p.productId.title %> (<%= p.quantity %>)</p>
            </li>
            <% }) %>
        </ul>
        <div class="centered">
            <h2>Total: <%= total %></h2>
            <form action="/create-checkout-session" method="POST">
                <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                <button class="btn" type="submit" id="checkout-button">Checkout</button>
            </form>
        </div>

    </main>
    <%- include('../includes/end.ejs') %>